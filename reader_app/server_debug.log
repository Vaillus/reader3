WARNING:src.integrations.kobo_service:Could not load Kobo settings.
INFO:     Started server process [57809]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8123 (Press CTRL+C to quit)
INFO:src.integrations.kobo_service:Sample book structure: {'NewEntitlement': {'BookEntitlement': {'ActivePeriod': {'From': '2024-08-05T01:03:50.0000000Z'}, 'IsRemoved': False, 'Status': 'Active', 'Accessibility': 'Full', 'CrossRevisionId': '349bac36-d335-32ec-b031-c93742f8ad35', 'RevisionId': 'fbb47f5b-b110-45ab-a529-f30a73a15787', 'IsHiddenFromArchive': False, 'Id': 'ce73f66a-d7f8-4545-90f6-03744a7b76d8', 'Created': '2024-08-05T01:03:50.0000000Z', 'LastModified': '2024-08-05T01:03:50.0000000Z', 'IsLocked': False, 'OriginCategory': 'Purchased', 'Metadata': {}}, 'ReadingState': {'EntitlementId': 'ce73f66a-d7f8-4545-90f6-03744a7b76d8', 'Created': '2024-08-05T01:03:50.0000000Z', 'LastModified': '2024-08-09T05:52:53.0000000Z', 'StatusInfo': {'LastModified': '2024-08-08T17:59:33.0000000Z', 'Status': 'Reading', 'TimesStartedReading': 2, 'LastTimeStartedReading': '2024-08-08T17:59:33.0000000Z', 'LastTimeFinished': '2024-08-07T14:27:51.0000000Z'}, 'Statistics': {'LastModified': '2024-08-07T14:15:28.0000000Z'}, 'CurrentBookmark': {'LastModified': '2024-08-09T05:52:49.0000000Z', 'ProgressPercent': 99.2059171199799, 'ContentSourceProgressPercent': 0, 'Location': {'Value': 'kobo.1.1', 'Type': 'KoboSpan', 'Source': 'OEBPS/XHTML/c58_ident.xhtml'}}, 'PriorityTimestamp': '2024-08-09T05:52:49.0000000Z'}, 'BookMetadata': {'CrossRevisionId': '349bac36-d335-32ec-b031-c93742f8ad35', 'RevisionId': 'fbb47f5b-b110-45ab-a529-f30a73a15787', 'Publisher': {'Name': 'Denoël', 'Imprint': 'Denoël'}, 'PublicationDate': '2023-01-01T00:00:00.0000000', 'Language': 'fr', 'Isbn': '9782207141892', 'Genre': '1561e6f7-742f-4c1b-a804-187728814574', 'Slug': 'chiens-de-guerre-3', 'CoverImageId': '80e8260d-ac91-4191-9dd9-c83cba39eb4e', 'CoverImageUrl': '//cdn.kobo.com/book-images/80e8260d-ac91-4191-9dd9-c83cba39eb4e/0/0/False/chiens-de-guerre-3.jpg', 'ApplicableSubscriptions': ['416bfce4-e4ae-4730-8314-5857dece58a6', 'be9e9ac0-5823-4047-8281-069986c626b9'], 'IsSocialEnabled': True, 'WorkId': '896dd6eb-b743-32e2-b973-aeac0cd10c6e', 'ExternalIds': ['od_5331961'], 'IsPreOrder': False, 'ContributorRoles': [{'Name': 'Adrian Tchaikovsky'}, {'Name': 'Henry-Luc Planchat'}], 'IsInternetArchive': False, 'IsAnnotationExportEnabled': False, 'IsAISummaryEnabled': False, 'AccessibilityDetails': {'IsFixedLayout': False, 'IsTextToSpeechAllowed': False, 'PrimaryContentType': '', 'ContentTypes': [], 'EPubAccessibilities': [{'Type': '00', 'Value': 'Cette publication est conforme au cahier des charges Hachette Livre "Génération EPUB3 Texte", version 1.2 du 01/01/2018.'}, {'Type': '52'}, {'Type': '14'}, {'Type': '19'}, {'Type': '13'}, {'Type': '29'}, {'Type': '11'}, {'Type': '41'}], 'HazardWarningTypes': [{'Type': '16'}], 'IsAccessible': False}, 'EntitlementId': 'ce73f66a-d7f8-4545-90f6-03744a7b76d8', 'Title': 'Chiens de guerre', 'Description': '<p>Je m’appelle Rex. Je suis un bon chien. Rex est un bon chien. C’est un biomorphe, un animal génétiquement modifié, armé de fusils-mitrailleurs de très gros calibre et doté d’une voix synthétique créée pour instiller la peur. Avec Dragon, Miel et Abeilles, son escouade d’assaut multiforme, il intervient sur des zones de combat où les humains ne peuvent se risquer. Rex est un bon chien. Il obéit aux ordres du Maître, qui lui désigne les ennemis. Et des ennemis, il y en a beaucoup. Mais qui s...', 'Categories': ['00000000-0000-0000-0000-000000000001', '1561e6f7-742f-4c1b-a804-187728814574', '185d806f-2b4e-41b9-a0bb-03b3647751b6'], 'DownloadUrls': [{'DrmType': 'AdobeDrm', 'Format': 'EPUB3WEB', 'Url': 'https://storedownloads.kobo.com/download?downloadToken=eyJ0eXAiOjIsInZlciI6IjEiLCJwdHlwIjoiQ2xpZW50QVBJRG93bmxvYWRUb2tlbiJ9.QFOZhIUlkNWUgwCm2zTGww.zvqVFEyFivrq3PW3NnhXNVijav67xhIhaQijasdYQ6A12ALPyqK-lKiWxP_zRzuZL37E_NnqigVLMzgYFwC5izMGE2XKBHFO7337_lpYfRti3RWxWh4LDdQHacu9CQt8dblya3kzlgQfWnB9Gr-tn8Q2Oo09XCVzkQ4VYNDrWjT9i84v1zzuQRrxZz8LUfrcPHubWX8hSM8NiiJNcMqdHk6jl1ISjqJxtG4JV7B6Mx_RX7GBpuLAM0Hd_p9QwOtZ-T-E0tqw-LE2BFPU6qCh41_RljD-41i-mWJ2KOPLbQBPvRw-du3alEn_1woOJPOJ3_j9y0YP51pwebTUo9SSv5UsOhI0GNBaESy-BSfeMlLp88MFj9jAc9hf2c_8_0bBMQ7rOKCPAWyfb1r3ulMGFPXDcZJAFZRfGwzv_WnJ91WnwdqZVDHOsITYmFf-PiZgnxgtjbutGT4ciZ_K2LGC_uo7glbeE0FLZwEWcNRRjQtWsgJI-4i1fZyA48g8q5i3_wrK-KjGlmm0Sp52wdje2_HHChRT1UPc6J9oMX3SGoEuDmTXQHmWAbsqe-uLmvallmDY18cKHP4lo2C0kq_W8IRHvJrYtqhMcMkJUpr9JWA0HTmvELWQ2RxX5oS2hW99TGY1jWn4_mxNkMjLC8Ld5gQGxAUvqNlt5g32JW9mitUcgw2UxD-Urse2pgkOkdt9wO5K7x8ELu-Oayh_3tu2gn_epFqcIblII1tN3Y_OqQH4vfL7u2Vf9JiR9XjLBhrfS6bg4YeIlvEHlduWjCH_JQ', 'Platform': 'Desktop', 'Size': 3585368}, {'DrmType': 'KDRM', 'Format': 'EPUB3', 'Url': 'https://storedownloads.kobo.com/download?downloadToken=eyJ0eXAiOjIsInZlciI6IjEiLCJwdHlwIjoiQ2xpZW50QVBJRG93bmxvYWRUb2tlbiJ9.rd1QcKuZO0gmJlSefECv6g.XZuSQuD6WGQDFFNS9rpfBwuWVZMNFlwrfsG6ohcw8QXMKFnehP2Vkidd18buXLZVYXAUyS3Chif7rS-ST351dvLNtg-xTGl14GjMoWdot1X6x_KF9-4Q8Gow35Mv0q5wXKPaMEbp-_L1v69Mh95IKJ2tg3jVGesJAjYlJ1UzXokHroK7Uur-uuhd4PV_nUPYn31_xcloYQHbZP5Ka3gGiiRt6BUYyz12HzM01LgTbNhVgeKoeqCUgyDrLCWs0qUKJln-cb8h_0VavIGR1TEt0QxSL8Hdv4HHm6QdE7-5WeFzu3U9x6IVtRgDzt449FNLjSh82SAtNItNwC5DIe4LqVlivWGTFCs3wGX7W_GQB6UQBk_aPUy1XnDKzOZjNRkLqbFjo5n2jg2AbPBGx8rgdPs_G8Ad1kSOMGWFkmtb4fKlstm3_jc2ELdPnm1i7guK331MxJks4z1SwouEwrWPVGMaF4IofpswCkaYUDjs6Wlvw-lCc6y9DA4xqatuQj54VHffU6SjFKNCy7g7CodaWTD35RDOW4nhpUnjVbFjFPGcBdmawUxzIIcB68pmicFUjnrQqJrk5GMgJSR0p5vVNoLweTObOtPgREVBnrKmFLKRWoFThqVUqngqs-f3-tYsxGkDd79iTwcnnsaKjwtVq3ba9g49CiAW9jEOvAiS0CIQYctdCXYY3SKcPCpWY6SKHxVzVPZfPeXIMPRdOlfdTH2lNuneTnXtnhLCwOUMq1FKIAo6dvqsTkpICtzKRvEFdp3k3opHKk823zrfovuDCQ', 'Platform': 'Generic', 'Size': 7455874}, {'DrmType': 'None', 'Format': 'EPUB3_SAMPLE', 'Url': 'https://storedownloads.kobo.com/download?downloadToken=eyJ0eXAiOjIsInZlciI6IjEiLCJwdHlwIjoiUHJldmlld0Rvd25sb2FkVG9rZW4ifQ.iW43U0i1IE9x51e7B2IW4g.wrpuRsxvHZTUiBNdeRNrfZvUWniA_Q5Alw6haOCzdyQkE2V5DK477qsFv7e6Aw2pKr9s1sAlsDWaTnfKFkVIqZz_xdsIbd2MNrklP4xK-EduBedPSx7bJHCx00XgsBr3IIy_y1t04bJmLVL_HR_4CDXRr_BEJKDsOpADCmiqI9NqAL6pylVOvYCQPOA2Ak1CGriRp807RBzrIOYyY4dHQA4lFhS4nSomr9-da0TJbY7xxq0z9q21m07I4VaudEf0X7mDNCdZM-bBffFD3ThLYmbz1wCX1BAnLKSpS_6nySegz1u0uodT439ODGn8keThjwyLJRfvbbmhur9htORFuocMFf1tBrL4OPnuUCN4kX-SkmWFQESnUv9X18BRzJP-Kv8Zh_3LntuNRlOHJa8t8IQL9_zNUMirOGwwn3larCCjSzoC8tet9ztpW9Sry9slcUi4NQzzgIujgobxCjicY2ilIIA9vVFbc8PkZ35s12g3XJAQDKdGgquB1-LRj3x4-tbiJ-8ezMp9BKLTDx1h_IASV72mD96zTYmOuS48CINV1gRqB9DMDDamf-Rs5FEP4jeU1ckGOGmRrqu_tCwS5tA532OYj7490evZ0bnOI28UY5168BPO6t29vDhLnmzCR84sISeElIXQ_AldrkhiQpf81R1hd4ZnPcLaLrlR5snVe_Jxrrq01XHCf4UkR3dRrFq_haOoja0vqH1oz3l4lg', 'Platform': 'Generic', 'Size': 3338846}], 'Contributors': ['Adrian Tchaikovsky', 'Henry-Luc Planchat'], 'Series': {}, 'CurrentDisplayPrice': {'TotalAmount': 8.99, 'CurrencyCode': 'EUR'}, 'CurrentLoveDisplayPrice': {'TotalAmount': 0}, 'IsEligibleForKoboLove': False, 'PhoneticPronunciations': {}, 'RelatedGroupId': '390ac08a-cedc-bcc4-0000-000000000000', 'Locale': {'LanguageCode': 'fre', 'ScriptCode': '', 'CountryCode': ''}}}}
INFO:src.integrations.kobo_service:Available keys: ['NewEntitlement']
INFO:     127.0.0.1:51763 - "GET /api/kobo/books HTTP/1.1" 200 OK
INFO:     127.0.0.1:51773 - "GET / HTTP/1.1" 200 OK
INFO:     127.0.0.1:51773 - "GET /import HTTP/1.1" 200 OK
INFO:src.integrations.kobo_service:Sample book structure: {'NewEntitlement': {'BookEntitlement': {'ActivePeriod': {'From': '2024-08-05T01:03:50.0000000Z'}, 'IsRemoved': False, 'Status': 'Active', 'Accessibility': 'Full', 'CrossRevisionId': '349bac36-d335-32ec-b031-c93742f8ad35', 'RevisionId': 'fbb47f5b-b110-45ab-a529-f30a73a15787', 'IsHiddenFromArchive': False, 'Id': 'ce73f66a-d7f8-4545-90f6-03744a7b76d8', 'Created': '2024-08-05T01:03:50.0000000Z', 'LastModified': '2024-08-05T01:03:50.0000000Z', 'IsLocked': False, 'OriginCategory': 'Purchased', 'Metadata': {}}, 'ReadingState': {'EntitlementId': 'ce73f66a-d7f8-4545-90f6-03744a7b76d8', 'Created': '2024-08-05T01:03:50.0000000Z', 'LastModified': '2024-08-09T05:52:53.0000000Z', 'StatusInfo': {'LastModified': '2024-08-08T17:59:33.0000000Z', 'Status': 'Reading', 'TimesStartedReading': 2, 'LastTimeStartedReading': '2024-08-08T17:59:33.0000000Z', 'LastTimeFinished': '2024-08-07T14:27:51.0000000Z'}, 'Statistics': {'LastModified': '2024-08-07T14:15:28.0000000Z'}, 'CurrentBookmark': {'LastModified': '2024-08-09T05:52:49.0000000Z', 'ProgressPercent': 99.2059171199799, 'ContentSourceProgressPercent': 0, 'Location': {'Value': 'kobo.1.1', 'Type': 'KoboSpan', 'Source': 'OEBPS/XHTML/c58_ident.xhtml'}}, 'PriorityTimestamp': '2024-08-09T05:52:49.0000000Z'}, 'BookMetadata': {'CrossRevisionId': '349bac36-d335-32ec-b031-c93742f8ad35', 'RevisionId': 'fbb47f5b-b110-45ab-a529-f30a73a15787', 'Publisher': {'Name': 'Denoël', 'Imprint': 'Denoël'}, 'PublicationDate': '2023-01-01T00:00:00.0000000', 'Language': 'fr', 'Isbn': '9782207141892', 'Genre': '1561e6f7-742f-4c1b-a804-187728814574', 'Slug': 'chiens-de-guerre-3', 'CoverImageId': '80e8260d-ac91-4191-9dd9-c83cba39eb4e', 'CoverImageUrl': '//cdn.kobo.com/book-images/80e8260d-ac91-4191-9dd9-c83cba39eb4e/0/0/False/chiens-de-guerre-3.jpg', 'ApplicableSubscriptions': ['416bfce4-e4ae-4730-8314-5857dece58a6', 'be9e9ac0-5823-4047-8281-069986c626b9'], 'IsSocialEnabled': True, 'WorkId': '896dd6eb-b743-32e2-b973-aeac0cd10c6e', 'ExternalIds': ['od_5331961'], 'IsPreOrder': False, 'ContributorRoles': [{'Name': 'Adrian Tchaikovsky'}, {'Name': 'Henry-Luc Planchat'}], 'IsInternetArchive': False, 'IsAnnotationExportEnabled': False, 'IsAISummaryEnabled': False, 'AccessibilityDetails': {'IsFixedLayout': False, 'IsTextToSpeechAllowed': False, 'PrimaryContentType': '', 'ContentTypes': [], 'EPubAccessibilities': [{'Type': '00', 'Value': 'Cette publication est conforme au cahier des charges Hachette Livre "Génération EPUB3 Texte", version 1.2 du 01/01/2018.'}, {'Type': '52'}, {'Type': '14'}, {'Type': '19'}, {'Type': '13'}, {'Type': '29'}, {'Type': '11'}, {'Type': '41'}], 'HazardWarningTypes': [{'Type': '16'}], 'IsAccessible': False}, 'EntitlementId': 'ce73f66a-d7f8-4545-90f6-03744a7b76d8', 'Title': 'Chiens de guerre', 'Description': '<p>Je m’appelle Rex. Je suis un bon chien. Rex est un bon chien. C’est un biomorphe, un animal génétiquement modifié, armé de fusils-mitrailleurs de très gros calibre et doté d’une voix synthétique créée pour instiller la peur. Avec Dragon, Miel et Abeilles, son escouade d’assaut multiforme, il intervient sur des zones de combat où les humains ne peuvent se risquer. Rex est un bon chien. Il obéit aux ordres du Maître, qui lui désigne les ennemis. Et des ennemis, il y en a beaucoup. Mais qui s...', 'Categories': ['00000000-0000-0000-0000-000000000001', '1561e6f7-742f-4c1b-a804-187728814574', '185d806f-2b4e-41b9-a0bb-03b3647751b6'], 'DownloadUrls': [{'DrmType': 'AdobeDrm', 'Format': 'EPUB3WEB', 'Url': 'https://storedownloads.kobo.com/download?downloadToken=eyJ0eXAiOjIsInZlciI6IjEiLCJwdHlwIjoiQ2xpZW50QVBJRG93bmxvYWRUb2tlbiJ9.lNs_gXH2yb6KQgXSjMfqSg.DtgKVbtMbuic0mH8i6gim9XWN4ut-xdIiBnpbCWQJMbt0vYsyHgP_rMPF4k_RDRNQIR1771ARPLHLSe53pXJHASZ7--DkG8rblpxj7fpmKHMmZBio5pj1c6IMI7Ar9zbab-LUW_911cqTgUwoAl7ApYPwLA2Tpi97c_qZcbaRzlVyHGEcwIri0CQN5_Qy-nkosKA9QISxxMN_G7Qj0UVaS-9TrOhVB8mGFnQfOzeQtV-v8cVmN26LgRh8He0X9bB_2pQwLBXLIsOmNQVOsOtleImS_-FSQxYXeDAJmhZqg5EzaaThfoIbcNH3v82nwHWZn-WpZ-xVrV3IGzbdVQpaFa9eojgGK7pgWFLpLm8GaoZAIAwyicuLMF_DjbGUooBOMrV2x__uZlweugsIXDkmDo6AC4L-etftenZbQ_aqFsFD2hYc0s9ssAWUzao_3aRlvWYr6EDWrh5RzYUEJm5I4xZb9QBaTxHY0y33v7RyjfCvwLY-SkfhdXaZEDBXNA_lxDpG1Mx9OrbF8BFFkBf3lO4L23hvMEvBZQ7Dvd5byddKMEBdggp4IBXsjROQGohzuSpTl0Mz7nzE2p0EtDuoaub_xHm1oD6WKRMLUTs8o8t0yRLc-lYVY4c1s9WhNqtX51YFJ1Ymt0ZWRlxDj1UbLaUVkyOb7qD8BNoCWfD2BeN9dVrP5JN2zEFAN9ZI3J0kiXe_BpZ0nZ7dfn_GXYb5R9qvNiOTnAmAmZyaTscN3qs_sBvrmrrPe1UqUgXWNOh9UfuiBHYUNgjDlISVPA_Ig', 'Platform': 'Desktop', 'Size': 3585368}, {'DrmType': 'KDRM', 'Format': 'EPUB3', 'Url': 'https://storedownloads.kobo.com/download?downloadToken=eyJ0eXAiOjIsInZlciI6IjEiLCJwdHlwIjoiQ2xpZW50QVBJRG93bmxvYWRUb2tlbiJ9.pDJrV2NnnOjzLjg_6pv7zw.OHjpPpICUkMRGs9HhGfsR5A0nNPKzpoElcBBzJZClb0zHisCCfvCKDWFNgyUxjHltlQiSr4R_HQsg5r603DsgOa5PKUZfOnJk3QqBNg17HDl7Nd3kZ04NondQJ6Q9to3lHCOIxqObh6ZRd0_bjWRiCpZbyKmdcQrTYnhvE_jHUomw7vSrPKXTC2zZs54Ks_et1hIskGfZz0ady2pN8WacJ4imfKyTID_1wvMG-JAIgCl2eQZUTKRmAqeejqI-xIl9AFmmj7EcnSmp-UMSVy9eDbnWm21nk2tcqhEB59Xzu2bwWEzoYmVmHnw8TiwqumVIqmK7QccNY-AX549Y5FjWZ0VixW7ZQ1VRLLeQCCVFPC2zvvopZiNmQj4NbFDCUN5QrpHwt20B_A6NU9eHaFRoepjFMBpZijSNxlaDW50UKvn1XELJFjONCOz1L_tD-7tsah1J_2cB47LVA09nrolfPRMCk0ClzRTnLaUYiY36kliRywENY1LrtwCKF294Uiv0icjkoIzJKJdh8NOxHwgC8xxQ5U4g7J_VlM2yT3AKNEXclXxZwf5dx1Kyu0OQkm1QrwyQePbeURHaNnGLmjguip4khZdlbJBZJk-LPMkqZzQM1eo5thG1C6HG-Iks7MVkwkIk40jteaWZi_uMdQAe5OO2A8op3tnixoGNTn6SzLCmFp7CHiu0e6H83MzBrwOIVIXd3yKa84jusBme1yX9mTRuK8SObbjXub4GUfGUkKwBo78zAnvxKnbY1_1vil5Un4LV-5wuX3km-AVBs_p5g', 'Platform': 'Generic', 'Size': 7455874}, {'DrmType': 'None', 'Format': 'EPUB3_SAMPLE', 'Url': 'https://storedownloads.kobo.com/download?downloadToken=eyJ0eXAiOjIsInZlciI6IjEiLCJwdHlwIjoiUHJldmlld0Rvd25sb2FkVG9rZW4ifQ.Zum2pzjlzfXf96iHjskzmg.LHta4f5m-vclURvjh3kfntUJGB481TbA3Oc5UWhA9khP72jxE5mQV-UmGWjczgFqlaXSjxz5Sk_CzQVpgXUw-NOc7ftUR93VBY56RUV6xlUQijNCS1Tbce6G303GvQ0O9xbmLeYsqPP_pSnOPxG90PRdYL1SBvLNCD8pxfzeKmgKy1cnHq27ReW2A9uaX8IJ__c-Cd25BJWecR0gCImOK-QDDsO76u53RSebfWGc8Ya2s-y3ftgIFr_uHJtXN8468w8VYvzgEWUcdhB7Tp90TLK9IYQm2uU8nO_d1AK1edJHDLGvfyFB6CGGZYbaMiC2S6HKaUIU5zT8d-nFbGwQJ5tMlePW0FpDP9p0nk4OcJCXZNWnYMSrc-fHKHgKvkEM5QkpH2DV52NSTDduPuKSWdm87S8M586vX-VAh_gYsl9bxkx6HW4rgO_40dGsaJ0B8yDP-xgiNQCJyZASa2lfFWe78aPxAi6RV3vpF4xa8JY5FCZBEYZhbvfk33JV2tjtfRg6X757_oAtGxGAJlq308d6gQFDpHwLtWmugQjo_KI4DsCWlFAj4dDMo4qKkHsogYweOET3YrAY9uD8ZdL13-hsNbrGh-AvxiLqUTmkgS5PSwkPz5GgOEV5EXqotFBuX8F72f26QQ2Xy7bZTN4wAe5qtcAPUF38GBe5P77HAzttRpS2JpYYtRoybsChmE5XqXyFFyXaPMqx-pqLGWJGMA', 'Platform': 'Generic', 'Size': 3338846}], 'Contributors': ['Adrian Tchaikovsky', 'Henry-Luc Planchat'], 'Series': {}, 'CurrentDisplayPrice': {'TotalAmount': 8.99, 'CurrencyCode': 'EUR'}, 'CurrentLoveDisplayPrice': {'TotalAmount': 0}, 'IsEligibleForKoboLove': False, 'PhoneticPronunciations': {}, 'RelatedGroupId': '390ac08a-cedc-bcc4-0000-000000000000', 'Locale': {'LanguageCode': 'fre', 'ScriptCode': '', 'CountryCode': ''}}}}
INFO:src.integrations.kobo_service:Available keys: ['NewEntitlement']
INFO:     127.0.0.1:51773 - "GET /api/kobo/books HTTP/1.1" 200 OK
